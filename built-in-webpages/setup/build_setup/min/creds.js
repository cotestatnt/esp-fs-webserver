window.renderCredentialTabs=()=>{const e=$("wifi-cred-tabs");if(!e)return;e.innerHTML="";const t=$("wifi-box").offsetWidth||Math.min(window.innerWidth,840),i=Math.floor((t-60)/140);if(window.matchMedia("(max-width: 608px)").matches){const t=newEl("select",{class:"in",style:"margin-bottom:10px"});wifiCredentials.forEach((e,i)=>{const n=newEl("option",{value:i});n.textContent=e.ssid||"(empty SSID)",i===selectedCredentialIndex&&(n.selected=!0),t.appendChild(n)}),t.addEventListener("change",e=>{selectedCredentialIndex=parseInt(e.target.value),window.applyCredential(wifiCredentials[selectedCredentialIndex])}),e.appendChild(t)}else if(wifiCredentials.length>i){const t=newEl("select",{class:"in",style:"margin-bottom:10px"});wifiCredentials.forEach((e,i)=>{const n=newEl("option",{value:i});n.textContent=e.ssid||"(empty SSID)",i===selectedCredentialIndex&&(n.selected=!0),t.appendChild(n)}),t.addEventListener("change",e=>{selectedCredentialIndex=parseInt(e.target.value),window.applyCredential(wifiCredentials[selectedCredentialIndex])}),e.appendChild(t)}else wifiCredentials.forEach((t,i)=>{const n=newEl("button",{class:"tab"});n.textContent=t.ssid||"(empty SSID)",i===selectedCredentialIndex&&n.classList.add("active"),n.onclick=n=>{e.querySelectorAll(".tab").forEach(e=>e.classList.remove("active")),n.target.classList.add("active"),selectedCredentialIndex=i,window.applyCredential(t)},e.appendChild(n)});const n=wifiCredentials.length>0;["delete-cred","clear-creds","cred-actions-inline"].forEach(e=>{const t=$(e);t&&(n?t.classList.remove("hide"):t.classList.add("hide"))})},window.addEventListener("resize",()=>{wifiCredentials&&wifiCredentials.length&&"function"==typeof renderCredentialTabs&&renderCredentialTabs()}),window.deleteSelectedCredential=()=>{if(selectedCredentialIndex<0||selectedCredentialIndex>=wifiCredentials.length)return;const e=wifiCredentials[selectedCredentialIndex];openModal("Delete WiFi",`Delete <b>${e.ssid}</b>?`,async()=>{try{await fetch(`${esp}wifi/credentials?index=${selectedCredentialIndex}`,{method:"DELETE"}),await loadCredentials(),closeModal(!1)}catch(e){openModal("Error","Failed to delete")}})},window.clearAllCredentials=()=>{wifiCredentials.length&&openModal("Clear All","Delete all WiFi credentials?",async()=>{try{await fetch(`${esp}wifi/credentials`,{method:"DELETE"}),await loadCredentials(),closeModal(!1)}catch(e){openModal("Error","Failed to clear")}})};