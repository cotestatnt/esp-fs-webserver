<html lang=en>
    <meta charset="utf-8">
    <title>File manager</title>
    <style media=screen>
        body {
            font-size: 12px;
            font-family: Verdana,Arial,Sans-serif
        }

        button {
            vertical-align: middle;
            height: 22px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        input{
            vertical-align: middle;
        }

        .contextMenu {
            z-index: 300;
            position: absolute;
            left: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #fff;
            display: none;
            box-shadow: 0 2px 8px rgba(0,0,0,.15);
            font-size: 13px;
            font-weight: 400;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .contextMenu ul {
            list-style: none;
            margin: 0;
            padding: 4px 0;
        }
        
        .contextMenu li {
            position: relative;
            min-width: 150px;
            cursor: pointer;
            list-style: none;
            padding: 8px 16px;
            margin: 0;
            transition: background-color 0.15s ease;
        }

        .contextMenu li:hover {
            background: #f0f0f0;
        }

        .contextMenu li:hover span {
            color: #000;
        }

        .contextMenu hr {
            border: 0;
            border-top: 1px solid #e0e0e0;
            margin: 4px 0;
        }

        .css-treeview li,.css-treeview ul {
            padding: 0;
            margin: 0;
            list-style: none;
            padding-top: 2px
        }

        .css-treeview input {
            position: absolute;
            opacity: 0
        }

        .css-treeview {
            font-size: 11px;
            -moz-user-select: none;
            -webkit-user-select: none;
            user-select: none
        }

        .css-treeview span {
            color: #00f;
            cursor: pointer
        }

        .css-treeview span:hover {
            text-decoration: underline
        }

        .css-treeview input+label+ul {
            margin: 0 0 0 22px
        }

        .css-treeview input~ul {
            display: none
        }

        .css-treeview label,.css-treeview label::before {
            cursor: pointer
        }

        .css-treeview input:disabled+label {
            cursor: default;
            opacity: .6
        }

        .css-treeview input:checked:not(:disabled)~ul {
            display: block
        }

        .css-treeview label,.css-treeview label::before,.css-treeview span,.css-treeview span::before {
            display: inline-block;
            height: 16px;
            line-height: 16px;
            vertical-align: middle
        }

        .css-treeview label::before {
            content: "üìÅ "; /* Folder icon */
            width: auto;
            margin: 0;
            vertical-align: middle;
        }

        .css-treeview input:checked+label::before {
            content: "üìÇ "; /* Open folder icon */
        }

        .css-treeview span::before {
            content: "üìÑ "; /* Default file icon */
            width: auto;
            margin: 0;
        }

        .css-treeview span.txt::before {
            content: "üìù "; /* Text file icon */
        }

        .css-treeview span.img::before {
            content: "üñºÔ∏è "; /* Image file icon */
        }

        #header {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            height: 24px;
            padding: 1px 0 0 0;
            background-color: #444;
            color: #eee
        }

        #tree {
            position: absolute;
            top: 25px;
            bottom: 0;
            left: 0;
            width: 20%;
            padding: 8px
        }

        #editor,#preview {
            position: absolute;
            top: 25px;
            right: 0;
            bottom: 0;
            left: 20%
        }

        #preview {
            background-color: #eee;
            padding: 5px
        }

        #status {
            position: absolute;
            top: 3px;
            right: 10px;
            font-size: 15px
        }

        #fsMeter {
            width: 100px;
            padding-bottom: 2px
        }

        #warning {
            height: 100%;
            background-color: orange;
            color: #000
        }

        .tooltip {
            position: absolute;
            z-index: 2;
            right: 0;
            top: 20px;
            visibility: hidden;
            background-color: #fff;
            color: #000;
            text-align: center;
            border: 1px solid #000;
            padding: 3px;
            font-size: 10px
        }

        #warning:hover .tooltip {
            visibility: visible
        }

        #loading {
            position: absolute;
            top: -100vh;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 100;
            background-color: rgba(0,0,0,.5);
            opacity: 0;
            transition: opacity .5s ease-in-out
        }

        #loading.shown {
            top: 0;
            opacity: 1
        }

        #loading-msg {
            display: inline-block;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 32px
        }

        @keyframes spinner-anim {
            0% {
                transform: rotate(0)
            }

            100% {
                transform: rotate(360deg)
            }
        }

        .spinner-anim:not(:required) {
            display: inline-block;
            position: relative;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            animation: spinner-anim 1s infinite linear;
            border: 16px solid #eee;
            border-right-color: transparent;
            border-radius: 32px;
            box-sizing: border-box;
            overflow: hidden;
            text-indent: -9999px;
            width: 64px;
            height: 64px
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.43.3/src-min-noconflict/ace.min.js"></script>
    
    <script>
        var tree, fsInfo;
        const $ = function(e) {
            return document.getElementById(e)
        }
        const closeMenu = function(e) {
            if (document.body.getElementsByClassName("contextMenu").length) document.body.removeChild(e);
        }
          , newEm = function(e) {
            return document.createElement(e)
        };
        function setLoading(e, n) {
            $("loading-msg").innerHTML = n || "",
            e ? $("loading").classList.add("shown") : $("loading").classList.remove("shown"),
            document.body.style.cursor = e ? "wait" : "default"
        }
        function readableSize(e) {
            if (e < 1024)
                return e + " B";
            for (var n = -1; n++,
            1024 < (e /= 1024); )
                ;
            return e.toFixed(2) + [" KiB", " MiB", " GiB", " TiB", "PiB"][n]
        }
        function refreshStatus() {
            $("status").innerHTML = "(refreshing...)";
            var e = new XMLHttpRequest;
            e.onload = function() {
                var n, t;
                200 != e.status ? showHttpError(e) : (n = (fsInfo = JSON.parse(e.responseText)).type + " - ",
                fsInfo.isOk ? (n += "<meter id='fsMeter' min='0' optimum='0'low='90' high='95' max='100' value='" + (1 + Math.round(99 * fsInfo.usedBytes / fsInfo.totalBytes)) + "' title='" + (t = readableSize(fsInfo.totalBytes - fsInfo.usedBytes) + " free of " + readableSize(fsInfo.totalBytes)) + "'>" + t + "</meter>",
                fsInfo.unsupportedFiles && (n += " <span id='warning'>WARNING<span class='tooltip'>Filesystem contains unsupported filenames:<br/>" + fsInfo.unsupportedFiles + "</span></span>")) : n += "<span style='background-color:red;color:white;font-weight:bold'>INIT ERROR !</span>",
                $("status").innerHTML = n,
                "SPIFFS" != fsInfo.type && ($("mkdir").style.display = "inline"))
            }
            ,
            e.open("GET", "/status", !0),
            e.send(null)
        }
        function showHttpError(e) {
            alert("ERROR: [" + e.status + "] " + e.responseText)
        }
        function canLoadNewContents() {
            return !!$("saveBtn").disabled || !!confirm("Changes to your document will be lost if you continue") && (enableSaveDiscardBtns(!1),
            !0)
        }
        function enableSaveDiscardBtns(e) {
            $("saveBtn").disabled = !e,
            $("discardBtn").disabled = !e
        }
        function getParentFolder(e) {
            return (e = (e = e.startsWith("/") ? e : "/" + e).endsWith("/") ? e.slice(0, -1) : e).substring(0, e.lastIndexOf("/"))
        }
        function createHeader(e, n, t) {
            var a = $(e)
              , i = newEm("input");
            i.type = "file",
            i.multiple = !1,
            i.name = "data",
            a.appendChild(i);
            var o = newEm("input");
            o.id = "pathInput",
            o.type = "text",
            o.name = "path",
            o.defaultValue = "/",
            a.appendChild(o);
            var s = newEm("button");
            s.innerHTML = "‚¨ÜÔ∏è Upload",
            a.appendChild(s);
            var l = newEm("button");
            l.id = "mkdir",
            l.style.display = "none",
            l.innerHTML = "üìÅ MkDir",
            a.appendChild(l);
            var d = newEm("button");
            d.innerHTML = "üìÑ MkFile",
            a.appendChild(d);
            var r = newEm("span");
            r.id = "editorButtons",
            r.style.display = "none",
            a.appendChild(r);
            var c = newEm("button");
            c.id = "saveBtn",
            c.innerHTML = "üíæ Save",
            c.style.marginLeft = "30px",
            c.disabled = !0,
            r.appendChild(c);
            var p = newEm("button");
            p.id = "discardBtn",
            p.innerHTML = "‚Ü∫ Discard",
            p.disabled = !0,
            r.appendChild(p),
            (e = newEm("a")).id = "aceLink",
            e.innerHTML = "‚ÑπÔ∏è Ace Editor",
            e.href = "https://github.com/ajaxorg/ace/wiki/Default-Keyboard-Shortcuts",
            e.target = "_blank",
            e.rel = "noopener noreferrer",
            e.style.marginLeft = "10px",
            e.style.color = "#0066cc",
            e.style.textDecoration = "none",
            r.appendChild(e),
            (r = newEm("span")).id = "status",
            r.innerHTML = "(loading)",
            a.appendChild(r),
            i.onchange = function(e) {
                var n;
                0 !== i.files.length && (n = i.files[0].name,
                o.value.startsWith("/") || (o.value = "/" + o.value),
                o.value = getParentFolder(o.value) + "/" + n)
            }
            ,
            s.onclick = function(e) {
                0 !== i.files.length && n.httpUpload(i.files[0], o.value)
            }
            ,
            d.onclick = function(e) {
                var t = o.value.trim();
                "" === t ? alert("A filename must be given") : t.endsWith("/") ? alert("Filenames must not end with a '/' character") : n.httpCreate(t)
            }
            ,
            l.onclick = function(e) {
                var t = o.value.trim();
                "" === t ? alert("A folder name must be given") : (t.endsWith("/") || (t += "/"),
                n.httpCreate(t))
            }
            ,
            c.onclick = function(e) {
                t.save()
            }
            ,
            p.onclick = function(e) {
                t.discard()
            }
        }
        function createTree(e, n) {
            var t = $("preview")
              , a = newEm("div");
              
            function i(e) {
              const xt = e.split('.').pop().toLowerCase();
              const xts = ['txt', 'htm', 'html', 'js', 'json', 'cpp', 'css', 'xml', 'yaml', 'csv', 'gz'];
              return xts.includes(xt) || xt === e
            }
            
            function o(e) {
              const t = e.split('.').pop().toLowerCase();
              const x = ['png', 'jpg', 'jpeg', 'gif', 'ico', 'svg', 'bmp'];
              return x.includes(t);
            }
              
            function s(e, n) {
                var t = newEm("ul");
                e.appendChild(t);
                var a = newEm("li");
                t.appendChild(a),
                a.innerHTML = "<span>‚úèÔ∏è Rename/Move</span>",
                a.onclick = function(t) {
                    closeMenu(e);
                    var a = prompt("Rename " + n + " to", n);
                    null != a && a != n && p(n, a)
                }
                ,
                a = newEm("li"),
                t.appendChild(a),
                a.innerHTML = "<span>‚¨áÔ∏è Download</span>",
                a.onclick = function(t) {
                    var a, i;
                    closeMenu(e),
                    a = n,
                    (i = new XMLHttpRequest).open("GET", a, !0),
                    i.responseType = "blob",
                    i.onload = function() {
                        var e = new Blob([i.response],{
                            type: "application/octetstream"
                        })
                          , n = (window.URL || window.webkitURL).createObjectURL(e)
                          , t = document.createElement("a");
                        t.setAttribute("download", a.replace(/^.*[\\/]/, "")),
                        t.setAttribute("href", n),
                        document.body.appendChild(t),
                        t.click(),
                        document.body.removeChild(t)
                    }
                    ,
                    i.send()
                }
                ,
                o(n) && (a = newEm("li"),
                t.appendChild(a),
                a.innerHTML = "<span>üëÅÔ∏è View as text</span>",
                a.onclick = function(t) {
                    closeMenu(e),
                    attemptLoadAsText(n)
                }
                ),
                a = newEm("li"),
                a.style.pointerEvents = "none",
                a.style.padding = "0",
                t.appendChild(a),
                a.innerHTML = "<hr>",
                a = newEm("li"),
                t.appendChild(a),
                a.innerHTML = "<span>üóëÔ∏è Delete</span>",
                a.onclick = function(t) {
                    closeMenu(e),
                    confirm("Delete file " + n + "?") && u(n)
                }
            }
            function l(e, n, t) {
                var a = newEm("div")
                  , i = document.body.scrollTop || document.documentElement.scrollTop
                  , o = document.body.scrollLeft || document.documentElement.scrollLeft
                  , l = e.clientX + o
                  , d = e.clientY + i;
                a.className = "contextMenu",
                a.style.display = "block",
                a.style.left = l + "px",
                a.style.top = d + "px",
                (t ? s : function(e, n) {
                    var t = newEm("ul");
                    e.appendChild(t);
                    var i = $(n).childNodes[0].checked
                      , a = newEm("li");
                    t.appendChild(a),
                    i ? (a.innerHTML = "<span>‚ûñ Collapse</span>",
                    a.onclick = function(t) {
                        closeMenu(e),
                        $(n).childNodes[0].checked = !1
                    }
                    ,
                    i = newEm("li"),
                    t.appendChild(i),
                    i.innerHTML = "<span>üîÑ Refresh</span>",
                    i.onclick = function(t) {
                        closeMenu(e),
                        r(n, t)
                    }
                    ) : (a.innerHTML = "<span>‚ûï Expand</span>",
                    a.onclick = function(t) {
                        closeMenu(e),
                        $(n).childNodes[0].checked = !0,
                        r(n, t)
                    }
                    ),
                    a = newEm("li"),
                    t.appendChild(a),
                    a.innerHTML = "<span>‚úèÔ∏è Rename/Move</span>",
                    a.onclick = function(t) {
                        closeMenu(e);
                        var a = prompt("Rename " + n + " to", n);
                        null != a && a != n && p(n, a)
                    }
                    ,
                    a = newEm("li"),
                    t.appendChild(a),
                    a.innerHTML = "<span>üóëÔ∏è Delete</span>",
                    a.onclick = function(t) {
                        closeMenu(e),
                        confirm("Delete folder " + n + "?") && u(n)
                    }
                }
                )(a, n),
                document.body.appendChild(a);
                var c = a.offsetWidth
                  , h = a.offsetHeight;
                a.onmouseout = function(e) {
                    (e.clientX < l || e.clientX > l + c || e.clientY < d || e.clientY > d + h) && closeMenu(a)
                }
            }
            function d(e, n) {
                return function() {
                    var t;
                    setLoading(!1),
                    200 != e.status ? showHttpError(e) : n ? (t = getParentFolder(n),
                    e.responseText && e.responseText != t && refreshPath(e.responseText),
                    refreshPath(t),
                    attemptLoad(n)) : refreshPath(e.responseText),
                    refreshStatus()
                }
            }
            function r(e, n) {
                var t, a, s;
                setLoading(!0, "Listing '" + e + "'..."),
                (xmlHttp = new XMLHttpRequest).onload = (t = xmlHttp,
                a = e,
                s = n,
                function() {
                    var e, n;
                    setLoading(!1),
                    200 != t.status ? showHttpError(t) : (!(e = $(a)) || (n = e.lastElementChild) && "UL" == n.tagName && e.removeChild(n),
                    function(e, n) {
                        n.sort(function(e, n) {
                            return e.type == n.type ? e.name.localeCompare(n.name) : e.type.localeCompare(n.type)
                        });
                        var t = newEm("ul");
                        $(e).appendChild(t);
                        for (var a = n.length, s = 0; s < a; s++) {
                            var d = "file" === (d = n[s]).type ? function(e, n, t) {
                                var a = newEm("li");
                                return a.id = ("/" == e ? "" : e) + "/" + n,
                                e = newEm("span"),
                                i(n) ? e.classList.add("txt") : o(n) && e.classList.add("img"),
                                e.innerHTML = n + " <i>(" + readableSize(t) + ")</i>",
                                a.appendChild(e),
                                a.onclick = function(e) {
                                    attemptLoad(a.id)
                                }
                                ,
                                a.oncontextmenu = function(e) {
                                    e.preventDefault(),
                                    e.stopPropagation(),
                                    l(e, a.id, !0)
                                }
                                ,
                                a
                            }(e, d.name, d.size) : function(e, n, t) {
                                var a = newEm("li");
                                a.id = ("/" == e ? "" : e) + "/" + n;
                                var i = newEm("input");
                                return i.type = "checkbox",
                                void 0 !== t && t && (i.disabled = "disabled"),
                                a.appendChild(i),
                                (t = newEm("label")).textContent = n,
                                a.appendChild(t),
                                i.onchange = function(e) {
                                    i.checked && r(a.id)
                                }
                                ,
                                t.onclick = function(e) {
                                    i.checked ? i.checked = !1 : (i.checked = !0,
                                    r(a.id))
                                }
                                ,
                                a.oncontextmenu = function(e) {
                                    e.preventDefault(),
                                    e.stopPropagation(),
                                    l(e, a.id, !1)
                                }
                                ,
                                a
                            }(e, d.name);
                            t.appendChild(d)
                        }
                        $("pathInput").value = e
                    }(a, JSON.parse(t.responseText)),
                    void 0 !== $(a).childNodes[0].checked && ($(a).childNodes[0].checked = !0),
                    s && s.length && c(s))
                }
                ),
                xmlHttp.open("GET", "/list?dir=" + e, !0),
                xmlHttp.send(null)
            }
            function c(e) {
                var n = e.pop();
                n && r(n, e)
            }
            function p(e, n) {
                setLoading(!0, "Renaming '" + e + "' to '" + n + "'..."),
                n.startsWith("/") || (n = "/" + n),
                (xmlHttp = new XMLHttpRequest).onload = d(xmlHttp, n);
                var t = new FormData;
                t.append("path", n),
                t.append("src", e),
                xmlHttp.open("PUT", "/edit"),
                xmlHttp.send(t)
            }
            function u(e) {
                setLoading(!0, "Deleting '" + e + "'..."),
                (xmlHttp = new XMLHttpRequest).onload = d(xmlHttp, e);
                var n = new FormData;
                n.append("path", e),
                xmlHttp.open("DELETE", "/edit"),
                xmlHttp.send(n)
            }
            return a.className = "css-treeview",
            a.id = "/",
            $(e).appendChild(a),
            this.clearMainPanel = function() {
                $("editor").style.display = "none",
                $("editorButtons").style.display = "none",
                t.style.display = "block",
                t.innerHTML = "<div style='text-align:center'>(file not found or format not supported)</div>"
            }
            ,
            this.attemptLoad = function(e) {
                var a, s, l;
                $("pathInput").value = e,
                canLoadNewContents() && (i(e) ? "undefined" == typeof ace ? (a = e,
                $("pathInput").value = a,
                $("editor").style.display = "none",
                $("editorButtons").style.display = "none",
                t.style.display = "block",
                t.innerHTML = "<span style='color:red;'>Ace editor could not be loaded from the internet nor from /edit/ace.js . Defaulting to text viewer...</span><pre id='txtContents' style='overflow: auto;'></pre>",
                (s = new XMLHttpRequest).onload = function() {
                    $("txtContents").textContent = this.responseText
                }
                ,
                s.open("GET", a),
                s.send()) : n.loadUrl(e) : o(e) ? (l = e,
                $("pathInput").value = l,
                $("editor").style.display = "none",
                $("editorButtons").style.display = "none",
                t.style.display = "block",
                t.innerHTML = "<img src='" + l + "' style='max-width:100%; max-height:100%; margin:auto; display:block;' />") : clearMainPanel())
            }
            ,
            this.attemptLoadAsText = function(e) {
                $("pathInput").value = e;
                if (!canLoadNewContents()) return;
                
                $("editor").style.display = "none";
                $("editorButtons").style.display = "none";
                t.style.display = "block";
                
                if ("undefined" == typeof ace) {
                    t.innerHTML = "<span style='color:red;'>Ace editor could not be loaded. Showing text content...</span><pre id='txtContents' style='overflow: auto;'></pre>";
                    var s = new XMLHttpRequest;
                    s.onload = function() {
                        $("txtContents").textContent = this.responseText
                    };
                    s.open("GET", e);
                    s.send();
                } else {
                    n.loadUrl(e);
                }
            }
            ,
            this.refreshPath = function(e) {
                if ("SPIFFS" == fsInfo.type)
                    r("/");
                else if (-1 == e.lastIndexOf("/"))
                    r("/");
                else {
                    for (var n = [], t = e; -1 != t.lastIndexOf("/") && !$(t); )
                        n.push(t),
                        t = getParentFolder(t);
                    "" == t ? n.push("/") : n.push(t),
                    c(n)
                }
            }
            ,
            this.httpUpload = function(e, n) {
                setLoading(!0, "Uploading '" + n + "'..."),
                n.startsWith("/") || (n = "/" + n),
                (xmlHttp = new XMLHttpRequest).onload = d(xmlHttp, n);
                var t = new FormData;
                t.append("data", e, n),
                xmlHttp.open("POST", "/edit"),
                xmlHttp.send(t)
            }
            ,
            this.httpCreate = function(e) {
                setLoading(!0, "Creating '" + e + "'..."),
                e.startsWith("/") || (e = "/" + e),
                (xmlHttp = new XMLHttpRequest).onload = d(xmlHttp, e);
                var n = new FormData;
                n.append("path", e),
                xmlHttp.open("PUT", "/edit"),
                xmlHttp.send(n)
            }
            ,
            r("/"),
            this
        }
        function createEditor(e, n, t, a, i) {
            function o(e) {
                var n = "plain"
                  , t = /(?:\.([^.]+))?$/.exec(e)[1];
                if (void 0 !== t)
                    switch (t) {
                    case "txt":
                        n = "plain";
                        break;
                    case "htm":
                        n = "html";
                        break;
                    case "js":
                        n = "javascript";
                        break;
                    case "css":
                    case "scss":
                    case "php":
                    case "html":
                    case "json":
                    case "xml":
                    case "yaml":
                    case "csv":
                        n = t
                    }
                return n
            }
            void 0 === n && (n = "/index.htm"),
            void 0 === t && (t = o(n)),
            void 0 === a && (a = "textmate"),
            void 0 === i && (i = "c_cpp" === t ? "text/plain" : "text/" + t);
            var s = null
              , l = ace.edit(e);
            function d() {
                setLoading(!1),
                200 != s.status && showHttpError(s),
                tree.refreshPath(getParentFolder(n)),
                refreshStatus()
            }
            function r() {
                setLoading(!1),
                $("preview").style.display = "none",
                $("editor").style.display = "block",
                $("editorButtons").style.display = "inline",
                200 == s.status ? (l.setValue(s.responseText),
                l.clearSelection(),
                enableSaveDiscardBtns(!1)) : tree.clearMainPanel()
            }
            function c(e) {
                setLoading(!0, "Loading '" + e + "'..."),
                (s = new XMLHttpRequest).onload = r,
                s.open("GET", e, !0),
                s.send(null)
            }
            return "plain" !== t && l.getSession().setMode("ace/mode/" + t),
            l.setTheme("ace/theme/" + a),
            l.$blockScrolling = 1 / 0,
            l.getSession().setUseSoftTabs(!0),
            l.getSession().setTabSize(2),
            l.setHighlightActiveLine(!0),
            l.setShowPrintMargin(!1),
            l.commands.addCommand({
                name: "save",
                bindKey: {
                    win: "Ctrl-S",
                    mac: "Command-S"
                },
                exec: function(e) {
                    e.save()
                },
                readOnly: !1
            }),
            l.session.on("change", function(e) {
                enableSaveDiscardBtns(!0)
            }),
            l.loadUrl = function(e) {
                $("pathInput").value = e,
                enableSaveDiscardBtns(!1),
                i = "text/" + (t = o(n = e)),
                "plain" !== t && l.getSession().setMode("ace/mode/" + t),
                c(n)
            }
            ,
            l.save = function() {
                var e, t, a, o;
                enableSaveDiscardBtns(!1),
                e = n,
                t = l.getValue() + "",
                a = i,
                setLoading(!0, "Saving '" + e + "'..."),
                (s = new XMLHttpRequest).onload = d,
                (o = new FormData).append("data", new Blob([t],{
                    type: a
                }), e),
                s.open("POST", "/edit"),
                s.send(o)
            }
            ,
            l.discard = function() {
                l.loadUrl(n),
                enableSaveDiscardBtns(!1)
            }
            ,
            c(n),
            l
        }
        function onBodyLoad() {
            var e, n = {};
            window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(e, t, a) {
                n[t] = a
            }),
            "undefined" != typeof ace && (e = createEditor("editor", n.file, n.lang, n.theme)),
            createHeader("header", tree = createTree("tree", e), e),
            refreshStatus()
        }
        
        var script;
        "undefined" == typeof ace && (console.log("Cannot load ace.js from the web, trying local copy"),
        (script = newEm("script")).src = "/edit/ace.js",
        script.async = !1,
        document.head.appendChild(script))
    </script>
    
    <body onload=onBodyLoad()>
        <div id=header></div>
        <div id=tree></div>
        <div id=editor></div>
        <div id=preview style=display:none></div>
        <div id=loading>
            <span id=loading-msg></span>
            <br>
            <div class=spinner-anim>Loading...</div>
        </div>
    </body>
</html>
