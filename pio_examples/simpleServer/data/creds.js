let resizeTimer;window.renderCredentialTabs=()=>{let e=$("wifi-cred-tabs");if(!e)return;e.innerHTML="";const i=($("wifi-box").offsetWidth||Math.min(window.innerWidth,840))-100,t=Math.floor(i/140);if(wifiCredentials.length>t){const i=newEl("select");wifiCredentials.forEach(((e,t)=>{const d=newEl("option",{value:t});d.textContent=e.ssid||"(empty SSID)",t===selectedCredentialIndex&&(d.selected=!0),i.appendChild(d)})),i.addEventListener("change",(()=>{selectedCredentialIndex=parseInt(i.value),applyCredentialToForm(wifiCredentials[selectedCredentialIndex])})),e.appendChild(i)}else wifiCredentials.forEach(((i,t)=>{const d=newEl("button",{class:"cred-tab","data-index":t});d.textContent=i.ssid||"(empty SSID)",t===selectedCredentialIndex&&d.classList.add("active"),d.addEventListener("click",(()=>{selectedCredentialIndex=t,renderCredentialTabs(),applyCredentialToForm(i)})),e.appendChild(d)}));wifiCredentials.length>0?(show("delete-cred"),show("clear-creds"),show("cred-actions-inline")):(hide("delete-cred"),hide("clear-creds"),hide("cred-actions-inline"))},window.deleteSelectedCredential=function(){if(selectedCredentialIndex<0||selectedCredentialIndex>=wifiCredentials.length)return;const e=wifiCredentials[selectedCredentialIndex];openModal("Delete WiFi credential",`Delete saved credential for <b>${e.ssid}</b>?`,(async()=>{try{await fetch(`${esp}wifi/credentials?index=${selectedCredentialIndex}`,{method:"DELETE"}),await loadCredentials(),closeModal(!1)}catch(e){console.error("Error deleting credential:",e),openModal("Error!","Failed to delete credential")}}))},window.clearAllCredentials=function(){wifiCredentials.length&&openModal("Clear WiFi credentials","Delete all saved WiFi credentials?",(async()=>{try{await fetch(`${esp}wifi/credentials`,{method:"DELETE"}),await loadCredentials(),closeModal(!1)}catch(e){console.error("Error clearing credentials:",e),openModal("Error!","Failed to clear credentials")}}))},window.addEventListener("resize",(()=>{clearTimeout(resizeTimer),resizeTimer=setTimeout((()=>{renderCredentialTabs()}),200)}));